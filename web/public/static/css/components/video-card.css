/**
 * VLog Video Card Component
 * Reusable BEM component for video cards across listing pages
 *
 * Used by: index.html, category.html, tag.html
 * Dependencies: design-tokens.css
 *
 * BEM Naming Convention:
 *   Block: .video-card
 *   Element: .video-card__thumbnail, .video-card__title
 *   Modifier: .video-card--featured, .video-card__title--truncated
 *
 * Example usage:
 *   <a class="video-card" href="/watch/slug">
 *     <div class="video-card__thumbnail">
 *       <img src="..." alt="...">
 *       <span class="video-card__duration">12:34</span>
 *     </div>
 *     <div class="video-card__info">
 *       <h3 class="video-card__title">Title</h3>
 *       <p class="video-card__meta">Category | Date</p>
 *     </div>
 *   </a>
 */

@layer components {
    /* Block: Video card container */
    .video-card {
        display: block;
        background: var(--vlog-bg-tertiary, #1e293b);
        border-radius: var(--vlog-radius-lg, 0.75rem);
        overflow: hidden;
        transition: box-shadow var(--vlog-transition-fast, 150ms ease),
                    transform var(--vlog-transition-fast, 150ms ease);
        text-decoration: none;
    }

    .video-card:hover {
        box-shadow: 0 0 0 2px var(--vlog-primary, #3b82f6);
        transform: scale(1.02);
    }

    /* Respect prefers-reduced-motion */
    @media (prefers-reduced-motion: reduce) {
        .video-card:hover {
            transform: none;
        }
    }

    /* Modifier: Featured video card */
    .video-card--featured {
        box-shadow: 0 0 0 2px var(--vlog-primary, #3b82f6);
    }

    /* Element: Thumbnail container */
    .video-card__thumbnail {
        position: relative;
        aspect-ratio: 16 / 9;
        background: var(--vlog-bg-secondary, #0f172a);
        overflow: hidden;
    }

    .video-card__thumbnail img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    /* Element: Duration badge */
    .video-card__duration {
        position: absolute;
        bottom: 0.5rem;
        right: 0.5rem;
        background: var(--vlog-bg-overlay, rgba(0, 0, 0, 0.8));
        color: var(--vlog-text-primary, #f1f5f9);
        padding: 0.25rem 0.5rem;
        border-radius: var(--vlog-radius-sm, 0.25rem);
        font-size: 0.875rem;
        font-variant-numeric: tabular-nums;
    }

    /* Element: Info container */
    .video-card__info {
        padding: 1rem;
    }

    /* Element: Video title */
    .video-card__title {
        font-weight: 500;
        color: var(--vlog-text-primary, #f1f5f9);
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        line-height: 1.4;
        margin: 0;
        transition: color var(--vlog-transition-fast, 150ms ease);
    }

    .video-card:hover .video-card__title {
        color: var(--vlog-primary-light, #60a5fa);
    }

    /* Modifier: Truncated title (single line) */
    .video-card__title--truncated {
        -webkit-line-clamp: 1;
        white-space: nowrap;
        text-overflow: ellipsis;
    }

    /* Element: Metadata (category, date) */
    .video-card__meta {
        color: var(--vlog-text-muted, #94a3b8);
        font-size: 0.875rem;
        margin: 0.25rem 0 0 0;
        line-height: 1.4;
    }

    /* Element: Tags container (for tag.html) */
    .video-card__tags {
        display: flex;
        flex-wrap: wrap;
        gap: 0.25rem;
        margin-top: 0.5rem;
    }

    /* Element: Individual tag badge */
    .video-card__tag {
        background: var(--vlog-bg-elevated, #334155);
        color: var(--vlog-text-secondary, #cbd5e1);
        padding: 0.125rem 0.5rem;
        border-radius: var(--vlog-radius-sm, 0.25rem);
        font-size: 0.75rem;
    }

    /* Progress bar overlay (for continue watching) */
    .video-card__progress {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: var(--vlog-bg-overlay, rgba(0, 0, 0, 0.5));
    }

    .video-card__progress-bar {
        height: 100%;
        background: var(--vlog-primary, #3b82f6);
        transition: width var(--vlog-transition-base, 200ms ease);
    }

    /* Element: View count display (Issue #413 Phase 3) */
    .video-card__views {
        display: inline-flex;
        align-items: center;
        gap: 0.25rem;
        color: var(--vlog-text-muted, #94a3b8);
        font-size: 0.75rem;
    }

    .video-card__views svg {
        width: 0.875rem;
        height: 0.875rem;
        opacity: 0.7;
    }

    /* Element: Hover actions overlay (Issue #413 Phase 3) */
    .video-card__actions {
        position: absolute;
        top: 0.5rem;
        right: 0.5rem;
        display: flex;
        gap: 0.25rem;
        opacity: 0;
        transform: translateY(-0.25rem);
        transition:
            opacity var(--vlog-transition-fast, 150ms ease),
            transform var(--vlog-transition-fast, 150ms ease);
    }

    .video-card:hover .video-card__actions,
    .video-card:focus-within .video-card__actions {
        opacity: 1;
        transform: translateY(0);
    }

    .video-card__action {
        display: flex;
        align-items: center;
        justify-content: center;
        /* WCAG 2.1 requires 44x44px minimum touch targets */
        width: 2.75rem;
        height: 2.75rem;
        background: var(--vlog-bg-overlay, rgba(0, 0, 0, 0.8));
        border: none;
        border-radius: var(--vlog-radius-sm, 0.25rem);
        color: var(--vlog-text-primary, #f1f5f9);
        cursor: pointer;
        transition: background var(--vlog-transition-fast, 150ms ease),
                    transform var(--vlog-transition-fast, 150ms ease);
    }

    .video-card__action:hover {
        background: var(--vlog-primary, #3b82f6);
    }

    /* Tactile feedback on press */
    .video-card__action:active {
        transform: scale(0.95);
    }

    .video-card__action:focus-visible {
        outline: 2px solid var(--vlog-primary, #3b82f6);
        outline-offset: 2px;
    }

    /* Respect prefers-reduced-motion for action buttons */
    @media (prefers-reduced-motion: reduce) {
        .video-card__action:active {
            transform: none;
        }
    }

    .video-card__action svg {
        width: 1rem;
        height: 1rem;
    }

    /* Modifier: Action button active state (e.g., in watch later) */
    .video-card__action--active {
        background: var(--vlog-primary, #3b82f6);
    }

    .video-card__action--active:hover {
        background: var(--vlog-primary-light, #60a5fa);
    }

    /* Modifier: List view layout (Issue #413 Phase 3) */
    .video-card--list {
        display: flex;
        flex-direction: row;
        gap: 1rem;
    }

    .video-card--list .video-card__thumbnail {
        flex-shrink: 0;
        width: 160px;
        aspect-ratio: 16 / 9;
        border-radius: var(--vlog-radius-md, 0.5rem);
    }

    @media (min-width: 640px) {
        .video-card--list .video-card__thumbnail {
            width: 240px;
        }
    }

    .video-card--list .video-card__info {
        flex: 1;
        padding: 0.25rem 0;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    .video-card--list .video-card__title {
        -webkit-line-clamp: 1;
        font-size: 1rem;
    }

    @media (min-width: 640px) {
        .video-card--list .video-card__title {
            -webkit-line-clamp: 2;
            font-size: 1.125rem;
        }
    }

    .video-card--list .video-card__description {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        color: var(--vlog-text-secondary, #cbd5e1);
        font-size: 0.875rem;
        margin-top: 0.25rem;
    }

    @media (max-width: 639px) {
        .video-card--list .video-card__description {
            display: none;
        }
    }
}
